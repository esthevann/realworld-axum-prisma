datasource db {
    provider = "sqlite"
    url      = env("DATABASE_URL")
}

generator client {
    // Corresponds to the cargo alias created earlier
    provider = "cargo prisma"
    // The location to generate the client. Is relative to the position of the schema
    output   = "../src/prisma.rs"
}

model User {
    id              String    @id @default(cuid())
    username        String    @unique
    image           String    @default("")
    bio             String    @default("")
    email           String    @unique
    password        String
    createdAt       DateTime  @default(now())
    articles        Article[] @relation("UserArticles")
    follows         User[]    @relation("follows")
    followsRelation User[]    @relation("follows")
    favorites       Article[] @relation("UserFavorites")
}

model Article {
    id          String   @id @default(cuid())
    slug        String   @unique
    title       String
    description String
    body        String
    createdAt   DateTime @default(now())
    updatedAt   DateTime @updatedAt
    tagList     Tag[]
    userId      String
    User        User     @relation(fields: [userId], references: [id], "UserArticles")
    favorites   User[]   @relation("UserFavorites")
}

model Tag {
    id        String  @id
    name      String
    Article   Article @relation(fields: [articleId], references: [id])
    articleId String
}
